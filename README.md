### Windows Service
Запускает сервис как дочерний процесс службы Windows.

Пишет логи сервиса в ротируемый файл `service.log`:
```json5
Process started
{"level":"info","time":"2024-05-26T09:58:09+03:00","message":"Starting server"}
{"level":"info","time":"2024-05-26T09:58:26+03:00","message":"Shutting down server"}
{"level":"info","time":"2024-05-26T09:58:26+03:00","message":"Server stopped"}
Process stopped
```

При аварийном завершении дочернего процесса пытается перезапустить его.

Операции (только в режиме Администратора):
- `make build` - сборка бинарных файлов службы Windows и тестового дочернего процесса
- `make install` - установка службы Windows (без записи в Реестр Windows)
- `make start` - запуск процесса службы Windows в фоне
- `make stop` - остановка процесса службы Windows
- `make delete` - удаление службы Windows. Если служба запущена, то она будет предварительно остановлена

Так же возможно управление службой через диспетчер задач.

### Конфигурационный файл

```json lines
{
  // имя регистрируемой службы Windows (обязательно)
  "name": "collector",
  // описание службы (обязательно)
  "description": "OPC UA Collector",
  // абсолютный путь бинарного файла родительского процесса (обязательно)
  "parentExecPath": "C:/Users/user/service.exe",
  // абсолютный путь бинарного файла дочернего процесса (обязательно)
  "childExecPath": "C:/Users/user/server.exe",
  // параметры запуска дочернего процесса (необязательно)
  "childExecArgs": ["-config", "C:/Users/user/config.json"],
  // путь файла для записи логов дочернего процесса
  // если указано только имя файла, то файл будет создан в директории бинарного файла дочернего процесса
  "logFilePath": "service.log",
  // максимальный размер файла до ротирования (необязательно)
  // при превышании размера будет создан новый файл с указанным выше именем, а файл со старыми логами будет переименован
  "logFileMaxSizeMB": 50,
  // максимальное количество ротаций файла (необязательно)
  "logFileMaxBackups": 3,
  // максимальный срок хранения файла в днях (необязательно)
  "logFileMaxAgeDays": 28,
  // сжатие файла с помощью gzip (необязательно)
  "logFileCompress": false
}
```

Если дочерний процесс службы имеет свой конфигурационный файл, тогда имеющиеся в нём пути так же должны быть абсолютными!

Пример в `service.config.json.example`.

### Тесты

Для запуска тестов службы Windows достаточно:
- Запустить `make test` от имени Администратора